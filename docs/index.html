<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI DevOps Assistant - Live Demo</title>
    <meta name="description" content="AI-powered DevOps assistant for log analysis, configuration generation, and error diagnosis.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #22c55e;
            --primary-dark: #16a34a;
            --accent: #3b82f6;
            --danger: #ef4444;
            --warning: #f59e0b;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --bg-input: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --border: #475569;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }

        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 20px;
            margin-bottom: 30px;
        }

        .lang-selector {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .lang-btn {
            padding: 8px 16px;
            background: rgba(255,255,255,0.15);
            border: 2px solid transparent;
            border-radius: 25px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .lang-btn:hover { background: rgba(255,255,255,0.25); }
        .lang-btn.active { background: white; color: var(--primary); }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        header h1 .icon { font-size: 3rem; }
        header p { opacity: 0.9; font-size: 1.1rem; }

        .connection-bar {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            background: var(--bg-card);
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            border: 1px solid var(--border);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-dot.connected { background: var(--primary); }
        .status-dot.disconnected { background: var(--warning); }

        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        .api-input-group { display: flex; gap: 10px; flex: 1; min-width: 300px; }

        .api-input {
            flex: 1;
            padding: 10px 15px;
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .api-input:focus { outline: none; border-color: var(--primary); }

        .connect-btn {
            padding: 10px 20px;
            background: var(--primary);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .connect-btn:hover { background: var(--primary-dark); }

        .tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }

        .tab {
            padding: 12px 24px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .tab:hover { background: var(--bg-input); color: var(--text-primary); }
        .tab.active { background: var(--primary); color: white; border-color: var(--primary); }

        .panel {
            background: var(--bg-card);
            border-radius: 20px;
            border: 1px solid var(--border);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .panel-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-header h2 { font-size: 1.2rem; display: flex; align-items: center; gap: 10px; }

        .mode-badge {
            padding: 5px 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .panel-body { padding: 20px; }

        .form-group { margin-bottom: 20px; }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 15px;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            font-family: inherit;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
            font-family: 'JetBrains Mono', monospace;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(34, 197, 94, 0.4); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

        .output-container { margin-top: 20px; }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .output-header h3 { color: var(--text-secondary); font-size: 0.9rem; }

        .copy-btn {
            padding: 6px 12px;
            background: var(--bg-input);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.8rem;
        }

        .copy-btn:hover { background: var(--border); color: var(--text-primary); }

        .code-output {
            background: var(--bg-dark);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 20px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s;
            border: 1px solid var(--border);
        }

        .feature-card:hover { transform: translateY(-5px); border-color: var(--primary); }

        .feature-icon { font-size: 2.5rem; margin-bottom: 15px; }
        .feature-card h3 { margin-bottom: 10px; font-size: 1.1rem; }
        .feature-card p { color: var(--text-secondary); font-size: 0.9rem; }

        footer {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        footer a { color: var(--primary); text-decoration: none; }
        footer a:hover { text-decoration: underline; }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        .tab-content { display: none; }
        .tab-content.active { display: block; }

        @media (max-width: 768px) {
            header h1 { font-size: 1.8rem; }
            .api-input-group { min-width: 100%; }
            .connection-bar { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="lang-selector">
                <button class="lang-btn active" data-lang="en" onclick="setLanguage('en')">EN</button>
                <button class="lang-btn" data-lang="ko" onclick="setLanguage('ko')">KO</button>
                <button class="lang-btn" data-lang="ja" onclick="setLanguage('ja')">JA</button>
                <button class="lang-btn" data-lang="zh" onclick="setLanguage('zh')">ZH</button>
                <button class="lang-btn" data-lang="es" onclick="setLanguage('es')">ES</button>
                <button class="lang-btn" data-lang="fr" onclick="setLanguage('fr')">FR</button>
                <button class="lang-btn" data-lang="de" onclick="setLanguage('de')">DE</button>
            </div>
            <h1><span class="icon">ğŸ”§</span><span id="title">AI DevOps Assistant</span></h1>
            <p id="subtitle">Log analysis, config generation, and error diagnosis powered by AI</p>
        </header>

        <div class="connection-bar">
            <div class="status-indicator">
                <span class="status-dot disconnected" id="statusDot"></span>
                <span id="statusText">Simulation Mode</span>
            </div>
            <div class="api-input-group">
                <input type="text" class="api-input" id="apiUrl" placeholder="http://localhost:5000">
                <button class="connect-btn" id="connectBtn" onclick="connectToAPI()">Connect</button>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="config" onclick="showTab('config')" id="tabConfig">Config Generator</button>
            <button class="tab" data-tab="logs" onclick="showTab('logs')" id="tabLogs">Log Analysis</button>
            <button class="tab" data-tab="diagnose" onclick="showTab('diagnose')" id="tabDiagnose">Error Diagnosis</button>
            <button class="tab" data-tab="chat" onclick="showTab('chat')" id="tabChat">Chat</button>
        </div>

        <!-- Config Generator Tab -->
        <div id="configContent" class="tab-content active">
            <div class="panel">
                <div class="panel-header">
                    <h2><span>âš™ï¸</span> <span id="configTitle">Config Generator</span></h2>
                    <span class="mode-badge" id="configModeBadge">Simulation</span>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label id="configTypeLabel">Configuration Type</label>
                        <select class="form-select" id="configType">
                            <option value="dockerfile">Dockerfile</option>
                            <option value="docker_compose">Docker Compose</option>
                            <option value="kubernetes">Kubernetes</option>
                            <option value="github_actions">GitHub Actions</option>
                            <option value="gitlab_ci">GitLab CI</option>
                            <option value="terraform">Terraform</option>
                            <option value="nginx">Nginx</option>
                            <option value="prometheus">Prometheus</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label id="descLabel">Description</label>
                        <textarea class="form-textarea" id="configDesc" placeholder="Describe your infrastructure needs..."></textarea>
                    </div>
                    <button class="btn" onclick="generateConfig()" id="generateConfigBtn">
                        <span>ğŸš€</span> <span id="generateConfigText">Generate Config</span>
                    </button>
                    <div class="output-container" id="configOutput" style="display: none;">
                        <div class="output-header">
                            <h3>Output</h3>
                            <button class="copy-btn" onclick="copyOutput('configResult')">Copy</button>
                        </div>
                        <div class="code-output" id="configResult"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Log Analysis Tab -->
        <div id="logsContent" class="tab-content">
            <div class="panel">
                <div class="panel-header">
                    <h2><span>ğŸ“Š</span> <span id="logsTitle">Log Analysis</span></h2>
                    <span class="mode-badge" id="logsModeBadge">Simulation</span>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label id="logTypeLabel">Log Type</label>
                        <select class="form-select" id="logType">
                            <option value="nginx">Nginx</option>
                            <option value="apache">Apache</option>
                            <option value="docker">Docker</option>
                            <option value="kubernetes">Kubernetes</option>
                            <option value="application">Application</option>
                            <option value="system">System</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label id="logsInputLabel">Log Content</label>
                        <textarea class="form-textarea" id="logsInput" placeholder="Paste your log content here..."></textarea>
                    </div>
                    <button class="btn" onclick="analyzeLogs()" id="analyzeLogsBtn">
                        <span>ğŸ”</span> <span id="analyzeLogsText">Analyze Logs</span>
                    </button>
                    <div class="output-container" id="logsOutput" style="display: none;">
                        <div class="output-header">
                            <h3>Analysis Result</h3>
                            <button class="copy-btn" onclick="copyOutput('logsResult')">Copy</button>
                        </div>
                        <div class="code-output" id="logsResult"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error Diagnosis Tab -->
        <div id="diagnoseContent" class="tab-content">
            <div class="panel">
                <div class="panel-header">
                    <h2><span>ğŸ”§</span> <span id="diagnoseTitle">Error Diagnosis</span></h2>
                    <span class="mode-badge" id="diagnoseModeBadge">Simulation</span>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <label id="errorMsgLabel">Error Message</label>
                        <textarea class="form-textarea" id="errorMsg" placeholder="Paste the error message..."></textarea>
                    </div>
                    <div class="form-group">
                        <label id="stackTraceLabel">Stack Trace (optional)</label>
                        <textarea class="form-textarea" id="stackTrace" placeholder="Paste stack trace if available..."></textarea>
                    </div>
                    <button class="btn" onclick="diagnoseError()" id="diagnoseErrorBtn">
                        <span>ğŸ©º</span> <span id="diagnoseErrorText">Diagnose Error</span>
                    </button>
                    <div class="output-container" id="diagnoseOutput" style="display: none;">
                        <div class="output-header">
                            <h3>Diagnosis Result</h3>
                            <button class="copy-btn" onclick="copyOutput('diagnoseResult')">Copy</button>
                        </div>
                        <div class="code-output" id="diagnoseResult"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Tab -->
        <div id="chatContent" class="tab-content">
            <div class="panel">
                <div class="panel-header">
                    <h2><span>ğŸ’¬</span> <span id="chatTitle">DevOps Assistant Chat</span></h2>
                    <span class="mode-badge" id="chatModeBadge">Simulation</span>
                </div>
                <div class="panel-body">
                    <div class="code-output" id="chatMessages" style="min-height: 300px; margin-bottom: 15px;"></div>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" class="form-input" id="chatInput" placeholder="Ask about DevOps..." onkeypress="handleChatKeyPress(event)">
                        <button class="btn" onclick="sendChat()" id="sendChatBtn">Send</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">âš™ï¸</div>
                <h3 id="feature1Title">Config Generator</h3>
                <p id="feature1Desc">Generate Docker, Kubernetes, CI/CD, and infrastructure configs.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ“Š</div>
                <h3 id="feature2Title">Log Analysis</h3>
                <p id="feature2Desc">Analyze logs to find patterns, errors, and insights.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ”§</div>
                <h3 id="feature3Title">Error Diagnosis</h3>
                <p id="feature3Desc">Get solutions for errors with AI-powered diagnosis.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ’¬</div>
                <h3 id="feature4Title">DevOps Chat</h3>
                <p id="feature4Desc">Ask questions about DevOps best practices.</p>
            </div>
        </div>

        <footer>
            <p id="footerText">Built with OpenWebUI + LLM | <a href="https://github.com/yoon-k/openwebui-devops-assistant">View on GitHub</a></p>
            <p id="footerDemo" style="margin-top: 10px; opacity: 0.7;">Connect your backend server to enable live AI analysis</p>
        </footer>
    </div>

    <script>
        let currentLang = localStorage.getItem('devops-lang') || 'en';
        let isConnected = false;
        let apiBaseUrl = localStorage.getItem('devops-api') || '';
        let chatHistory = [];

        const i18n = {
            en: {
                title: "AI DevOps Assistant",
                subtitle: "Log analysis, config generation, and error diagnosis powered by AI",
                tabConfig: "Config Generator",
                tabLogs: "Log Analysis",
                tabDiagnose: "Error Diagnosis",
                tabChat: "Chat",
                configTitle: "Config Generator",
                logsTitle: "Log Analysis",
                diagnoseTitle: "Error Diagnosis",
                chatTitle: "DevOps Assistant Chat",
                generateConfig: "Generate Config",
                analyzeLogs: "Analyze Logs",
                diagnoseError: "Diagnose Error",
                send: "Send",
                connect: "Connect",
                disconnect: "Disconnect",
                connected: "Connected to API",
                disconnected: "Simulation Mode",
                simulation: "Simulation",
                live: "Live API",
                feature1Title: "Config Generator",
                feature1Desc: "Generate Docker, Kubernetes, CI/CD, and infrastructure configs.",
                feature2Title: "Log Analysis",
                feature2Desc: "Analyze logs to find patterns, errors, and insights.",
                feature3Title: "Error Diagnosis",
                feature3Desc: "Get solutions for errors with AI-powered diagnosis.",
                feature4Title: "DevOps Chat",
                feature4Desc: "Ask questions about DevOps best practices.",
                footerText: "Built with OpenWebUI + LLM | <a href='https://github.com/yoon-k/openwebui-devops-assistant'>View on GitHub</a>",
                footerDemo: "Connect your backend server to enable live AI analysis"
            },
            ko: {
                title: "AI DevOps ì–´ì‹œìŠ¤í„´íŠ¸",
                subtitle: "AI ê¸°ë°˜ ë¡œê·¸ ë¶„ì„, ì„¤ì • ìƒì„±, ì˜¤ë¥˜ ì§„ë‹¨",
                tabConfig: "ì„¤ì • ìƒì„±ê¸°",
                tabLogs: "ë¡œê·¸ ë¶„ì„",
                tabDiagnose: "ì˜¤ë¥˜ ì§„ë‹¨",
                tabChat: "ì±„íŒ…",
                generateConfig: "ì„¤ì • ìƒì„±",
                analyzeLogs: "ë¡œê·¸ ë¶„ì„",
                diagnoseError: "ì˜¤ë¥˜ ì§„ë‹¨",
                send: "ì „ì†¡",
                connect: "ì—°ê²°",
                disconnect: "ì—°ê²° í•´ì œ",
                connected: "API ì—°ê²°ë¨",
                disconnected: "ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ",
                simulation: "ì‹œë®¬ë ˆì´ì…˜",
                live: "ë¼ì´ë¸Œ API",
                feature1Title: "ì„¤ì • ìƒì„±ê¸°",
                feature1Desc: "Docker, Kubernetes, CI/CD ì„¤ì •ì„ ìƒì„±í•©ë‹ˆë‹¤.",
                feature2Title: "ë¡œê·¸ ë¶„ì„",
                feature2Desc: "ë¡œê·¸ì—ì„œ íŒ¨í„´, ì˜¤ë¥˜, ì¸ì‚¬ì´íŠ¸ë¥¼ ì°¾ìŠµë‹ˆë‹¤.",
                feature3Title: "ì˜¤ë¥˜ ì§„ë‹¨",
                feature3Desc: "AI ê¸°ë°˜ ì§„ë‹¨ìœ¼ë¡œ ì˜¤ë¥˜ í•´ê²°ì±…ì„ ì–»ìŠµë‹ˆë‹¤.",
                feature4Title: "DevOps ì±„íŒ…",
                feature4Desc: "DevOps ëª¨ë²” ì‚¬ë¡€ì— ëŒ€í•´ ì§ˆë¬¸í•˜ì„¸ìš”.",
                footerText: "OpenWebUI + LLMìœ¼ë¡œ ì œì‘ | <a href='https://github.com/yoon-k/openwebui-devops-assistant'>GitHubì—ì„œ ë³´ê¸°</a>",
                footerDemo: "ë°±ì—”ë“œ ì„œë²„ë¥¼ ì—°ê²°í•˜ì—¬ ì‹¤ì‹œê°„ AI ë¶„ì„ì„ í™œì„±í™”í•˜ì„¸ìš”"
            },
            ja: {
                title: "AI DevOpsã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ",
                subtitle: "AIã«ã‚ˆã‚‹ãƒ­ã‚°åˆ†æã€è¨­å®šç”Ÿæˆã€ã‚¨ãƒ©ãƒ¼è¨ºæ–­",
                tabConfig: "è¨­å®šç”Ÿæˆ",
                tabLogs: "ãƒ­ã‚°åˆ†æ",
                tabDiagnose: "ã‚¨ãƒ©ãƒ¼è¨ºæ–­",
                tabChat: "ãƒãƒ£ãƒƒãƒˆ",
                generateConfig: "è¨­å®šã‚’ç”Ÿæˆ",
                analyzeLogs: "ãƒ­ã‚°ã‚’åˆ†æ",
                diagnoseError: "ã‚¨ãƒ©ãƒ¼ã‚’è¨ºæ–­",
                send: "é€ä¿¡",
                connect: "æ¥ç¶š",
                disconnect: "åˆ‡æ–­",
                connected: "APIæ¥ç¶šæ¸ˆã¿",
                disconnected: "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¢ãƒ¼ãƒ‰",
                simulation: "ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                live: "ãƒ©ã‚¤ãƒ–API",
                footerText: "OpenWebUI + LLMã§æ§‹ç¯‰ | <a href='https://github.com/yoon-k/openwebui-devops-assistant'>GitHubã§è¦‹ã‚‹</a>",
                footerDemo: "ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã‚’æ¥ç¶šã—ã¦ãƒ©ã‚¤ãƒ–AIåˆ†æã‚’æœ‰åŠ¹ã«ã—ã¦ãã ã•ã„"
            },
            zh: {
                title: "AI DevOpsåŠ©æ‰‹",
                subtitle: "AIé©±åŠ¨çš„æ—¥å¿—åˆ†æã€é…ç½®ç”Ÿæˆå’Œé”™è¯¯è¯Šæ–­",
                tabConfig: "é…ç½®ç”Ÿæˆå™¨",
                tabLogs: "æ—¥å¿—åˆ†æ",
                tabDiagnose: "é”™è¯¯è¯Šæ–­",
                tabChat: "èŠå¤©",
                generateConfig: "ç”Ÿæˆé…ç½®",
                analyzeLogs: "åˆ†ææ—¥å¿—",
                diagnoseError: "è¯Šæ–­é”™è¯¯",
                send: "å‘é€",
                connect: "è¿æ¥",
                disconnect: "æ–­å¼€",
                connected: "å·²è¿æ¥API",
                disconnected: "æ¨¡æ‹Ÿæ¨¡å¼",
                simulation: "æ¨¡æ‹Ÿ",
                live: "å®æ—¶API",
                footerText: "ä½¿ç”¨OpenWebUI + LLMæ„å»º | <a href='https://github.com/yoon-k/openwebui-devops-assistant'>åœ¨GitHubä¸ŠæŸ¥çœ‹</a>",
                footerDemo: "è¿æ¥æ‚¨çš„åç«¯æœåŠ¡å™¨ä»¥å¯ç”¨å®æ—¶AIåˆ†æ"
            },
            es: {
                title: "AI DevOps Assistant",
                subtitle: "AnÃ¡lisis de logs, generaciÃ³n de configs y diagnÃ³stico de errores con IA",
                connect: "Conectar",
                disconnect: "Desconectar",
                connected: "API Conectada",
                disconnected: "Modo SimulaciÃ³n",
                generateConfig: "Generar Config",
                analyzeLogs: "Analizar Logs",
                diagnoseError: "Diagnosticar Error",
                send: "Enviar"
            },
            fr: {
                title: "AI DevOps Assistant",
                subtitle: "Analyse de logs, gÃ©nÃ©ration de configs et diagnostic d'erreurs avec IA",
                connect: "Connecter",
                disconnect: "DÃ©connecter",
                connected: "API ConnectÃ©e",
                disconnected: "Mode Simulation",
                generateConfig: "GÃ©nÃ©rer Config",
                analyzeLogs: "Analyser Logs",
                diagnoseError: "Diagnostiquer Erreur",
                send: "Envoyer"
            },
            de: {
                title: "AI DevOps Assistant",
                subtitle: "Log-Analyse, Config-Generierung und Fehlerdiagnose mit KI",
                connect: "Verbinden",
                disconnect: "Trennen",
                connected: "API verbunden",
                disconnected: "Simulationsmodus",
                generateConfig: "Config Generieren",
                analyzeLogs: "Logs Analysieren",
                diagnoseError: "Fehler Diagnostizieren",
                send: "Senden"
            }
        };

        const simulatedResponses = {
            config: `# Generated Dockerfile (Simulation)

FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build

FROM node:18-alpine
WORKDIR /app
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/node_modules ./node_modules
EXPOSE 3000
USER node
CMD ["node", "dist/index.js"]

# Best Practices Applied:
# - Multi-stage build for smaller image
# - Non-root user for security
# - Production dependencies only
# - Layer caching optimized`,

            logs: `# Log Analysis Result (Simulation)

## Summary
- Total entries analyzed: 150
- Time range: 2024-01-15 08:00:00 - 12:00:00

## Issues Found
1. **High Error Rate** (CRITICAL)
   - 23 "Connection refused" errors
   - Occurs during peak hours (10:00-11:00)
   - Affected service: database-primary

2. **Memory Warning** (WARNING)
   - Memory usage exceeded 80% threshold
   - 5 occurrences in 4 hours
   - Service: api-gateway

## Recommendations
1. Check database connection pool settings
2. Increase memory limits for api-gateway
3. Implement circuit breaker pattern`,

            diagnose: `# Error Diagnosis (Simulation)

## Error Analysis
**Type:** Connection Error
**Severity:** High

## Root Cause
Database connection pool exhausted due to:
1. Long-running queries blocking connections
2. Connection leak in transaction handling
3. Pool size insufficient for current load

## Recommended Solutions

### Immediate Actions
1. Restart the affected service
2. Increase connection pool size temporarily

### Long-term Fixes
\`\`\`python
# Increase pool size
SQLALCHEMY_POOL_SIZE = 20
SQLALCHEMY_MAX_OVERFLOW = 10

# Add connection timeout
SQLALCHEMY_POOL_TIMEOUT = 30
\`\`\`

3. Implement connection pooling monitoring
4. Review and optimize slow queries`,

            chat: "I'm the DevOps Assistant! I can help you with configuration generation, log analysis, error diagnosis, and DevOps best practices. What would you like help with today?"
        };

        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('devops-lang', lang);
            const t = i18n[lang] || i18n.en;

            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });

            document.getElementById('title').textContent = t.title || i18n.en.title;
            document.getElementById('subtitle').textContent = t.subtitle || i18n.en.subtitle;

            if (t.tabConfig) document.getElementById('tabConfig').textContent = t.tabConfig;
            if (t.tabLogs) document.getElementById('tabLogs').textContent = t.tabLogs;
            if (t.tabDiagnose) document.getElementById('tabDiagnose').textContent = t.tabDiagnose;
            if (t.tabChat) document.getElementById('tabChat').textContent = t.tabChat;

            document.getElementById('generateConfigText').textContent = t.generateConfig || i18n.en.generateConfig;
            document.getElementById('analyzeLogsText').textContent = t.analyzeLogs || i18n.en.analyzeLogs;
            document.getElementById('diagnoseErrorText').textContent = t.diagnoseError || i18n.en.diagnoseError;
            document.getElementById('sendChatBtn').textContent = t.send || i18n.en.send;
            document.getElementById('connectBtn').textContent = isConnected ? (t.disconnect || 'Disconnect') : (t.connect || 'Connect');
            document.getElementById('statusText').textContent = isConnected ? (t.connected || 'Connected') : (t.disconnected || 'Simulation Mode');

            document.querySelectorAll('.mode-badge').forEach(badge => {
                badge.textContent = isConnected ? (t.live || 'Live API') : (t.simulation || 'Simulation');
            });

            document.getElementById('feature1Title').textContent = t.feature1Title || i18n.en.feature1Title;
            document.getElementById('feature1Desc').textContent = t.feature1Desc || i18n.en.feature1Desc;
            document.getElementById('feature2Title').textContent = t.feature2Title || i18n.en.feature2Title;
            document.getElementById('feature2Desc').textContent = t.feature2Desc || i18n.en.feature2Desc;
            document.getElementById('feature3Title').textContent = t.feature3Title || i18n.en.feature3Title;
            document.getElementById('feature3Desc').textContent = t.feature3Desc || i18n.en.feature3Desc;
            document.getElementById('feature4Title').textContent = t.feature4Title || i18n.en.feature4Title;
            document.getElementById('feature4Desc').textContent = t.feature4Desc || i18n.en.feature4Desc;
            document.getElementById('footerText').innerHTML = t.footerText || i18n.en.footerText;
            document.getElementById('footerDemo').textContent = t.footerDemo || i18n.en.footerDemo;
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`${tabName}Content`).classList.add('active');
        }

        async function connectToAPI() {
            const url = document.getElementById('apiUrl').value.trim();
            if (isConnected) {
                isConnected = false;
                apiBaseUrl = '';
                localStorage.removeItem('devops-api');
                updateConnectionStatus();
                return;
            }
            if (!url) { alert('Please enter API URL'); return; }

            document.getElementById('connectBtn').disabled = true;
            try {
                const response = await fetch(`${url}/api/health`);
                if (response.ok) {
                    isConnected = true;
                    apiBaseUrl = url;
                    localStorage.setItem('devops-api', url);
                } else { throw new Error('Health check failed'); }
            } catch (error) {
                alert(`Connection failed: ${error.message}`);
                isConnected = false;
            }
            document.getElementById('connectBtn').disabled = false;
            updateConnectionStatus();
        }

        function updateConnectionStatus() {
            const t = i18n[currentLang] || i18n.en;
            document.getElementById('statusDot').className = 'status-dot ' + (isConnected ? 'connected' : 'disconnected');
            document.getElementById('statusText').textContent = isConnected ? (t.connected || 'Connected') : (t.disconnected || 'Simulation Mode');
            document.getElementById('connectBtn').textContent = isConnected ? (t.disconnect || 'Disconnect') : (t.connect || 'Connect');
            document.querySelectorAll('.mode-badge').forEach(badge => {
                badge.textContent = isConnected ? (t.live || 'Live API') : (t.simulation || 'Simulation');
            });
        }

        async function generateConfig() {
            const btn = document.getElementById('generateConfigBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Generating...';

            const configType = document.getElementById('configType').value;
            const description = document.getElementById('configDesc').value;

            let result;
            if (isConnected && apiBaseUrl) {
                try {
                    const response = await fetch(`${apiBaseUrl}/api/config`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ config_type: configType, description, requirements: [], language: currentLang })
                    });
                    const data = await response.json();
                    result = data.config || data.error || JSON.stringify(data, null, 2);
                } catch (error) {
                    result = simulatedResponses.config + '\n\n# API Error: ' + error.message;
                }
            } else {
                await new Promise(r => setTimeout(r, 1000));
                result = simulatedResponses.config;
            }

            document.getElementById('configResult').textContent = result;
            document.getElementById('configOutput').style.display = 'block';
            btn.disabled = false;
            btn.innerHTML = '<span>ğŸš€</span> ' + (i18n[currentLang]?.generateConfig || 'Generate Config');
        }

        async function analyzeLogs() {
            const btn = document.getElementById('analyzeLogsBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Analyzing...';

            const logType = document.getElementById('logType').value;
            const logs = document.getElementById('logsInput').value;

            let result;
            if (isConnected && apiBaseUrl) {
                try {
                    const response = await fetch(`${apiBaseUrl}/api/logs`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ logs, log_type: logType, language: currentLang })
                    });
                    const data = await response.json();
                    result = data.analysis || data.error || JSON.stringify(data, null, 2);
                } catch (error) {
                    result = simulatedResponses.logs + '\n\n# API Error: ' + error.message;
                }
            } else {
                await new Promise(r => setTimeout(r, 1000));
                result = simulatedResponses.logs;
            }

            document.getElementById('logsResult').textContent = result;
            document.getElementById('logsOutput').style.display = 'block';
            btn.disabled = false;
            btn.innerHTML = '<span>ğŸ”</span> ' + (i18n[currentLang]?.analyzeLogs || 'Analyze Logs');
        }

        async function diagnoseError() {
            const btn = document.getElementById('diagnoseErrorBtn');
            btn.disabled = true;
            btn.innerHTML = '<span class="loading"></span> Diagnosing...';

            const errorMsg = document.getElementById('errorMsg').value;
            const stackTrace = document.getElementById('stackTrace').value;

            let result;
            if (isConnected && apiBaseUrl) {
                try {
                    const response = await fetch(`${apiBaseUrl}/api/diagnose`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ error_message: errorMsg, context: '', stack_trace: stackTrace, language: currentLang })
                    });
                    const data = await response.json();
                    result = data.diagnosis || data.error || JSON.stringify(data, null, 2);
                } catch (error) {
                    result = simulatedResponses.diagnose + '\n\n# API Error: ' + error.message;
                }
            } else {
                await new Promise(r => setTimeout(r, 1000));
                result = simulatedResponses.diagnose;
            }

            document.getElementById('diagnoseResult').textContent = result;
            document.getElementById('diagnoseOutput').style.display = 'block';
            btn.disabled = false;
            btn.innerHTML = '<span>ğŸ©º</span> ' + (i18n[currentLang]?.diagnoseError || 'Diagnose Error');
        }

        async function sendChat() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML += `<div style="margin-bottom: 10px;"><strong>You:</strong> ${message}</div>`;
            input.value = '';

            let response;
            if (isConnected && apiBaseUrl) {
                try {
                    const res = await fetch(`${apiBaseUrl}/api/chat`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message, context: 'devops', history: chatHistory, language: currentLang })
                    });
                    const data = await res.json();
                    response = data.response || data.error || 'No response';
                } catch (error) {
                    response = simulatedResponses.chat + ' (API Error: ' + error.message + ')';
                }
            } else {
                await new Promise(r => setTimeout(r, 500));
                response = simulatedResponses.chat;
            }

            chatMessages.innerHTML += `<div style="margin-bottom: 10px; color: var(--primary);"><strong>Assistant:</strong> ${response}</div>`;
            chatMessages.scrollTop = chatMessages.scrollHeight;
            chatHistory.push({ role: 'user', content: message }, { role: 'assistant', content: response });
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') sendChat();
        }

        function copyOutput(elementId) {
            const text = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(text);
            alert('Copied to clipboard!');
        }

        if (apiBaseUrl) {
            document.getElementById('apiUrl').value = apiBaseUrl;
            connectToAPI();
        }
        setLanguage(currentLang);
        document.getElementById('chatMessages').innerHTML = `<div style="color: var(--primary);"><strong>Assistant:</strong> ${simulatedResponses.chat}</div>`;
    </script>
</body>
</html>
